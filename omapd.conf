<?xml version="1.0"?>
<omapd_configuration xmlns="http://config.omapd.org" version="2.0">
  <!-- You must provide paths to these standard schemas.  They will be used
       to validate published standard metadata.
  -->
  <ifmap_metadata_v11_schema_path>ifmap-metadata-1.0v23.xsd</ifmap_metadata_v11_schema_path>
  <ifmap_metadata_v20_schema_path>ifmap-metadata-2.0r25.xsd</ifmap_metadata_v20_schema_path>

  <!-- log_file_location: leave empty to disable logging to file -->
  <!-- default is append="yes" -->
  <log_file_location append="yes">omapd.log</log_file_location>

  <!-- if enable="no" omapd will NOT log messages to stderr -->
  <log_stderr enable="yes"/>

  <!--
      ShowClientOps = 0x0001,
      ShowXML = 0x0002,
      ShowHTTPHeaders = 0x0004,
      ShowHTTPState = 0x0008,
      ShowXMLParsing = 0x0010,
      ShowXMLFilterResults = 0x0020,
      ShowXMLFilterStatements = 0x0040,
      ShowMAPGraphAfterChange = 0x0080,
      ShowRawSocketData = 0x0100
  -->
  <!-- debug_level is a OR combination of the above hex flags.  Do the math! -->
  <!-- <debug_level> default is 0x0000 (no debugging) -->
  <debug_level>0000</debug_level>

  <service_configuration>
    <!--
	SupportIfmapV10 = 0x01,
	SupportIfmapV11 = 0x02
	SupportIfmapV20 = 0x04
    -->
    <!-- ifmap_version_support is a OR combination of the above hex flags.  Do the math! -->
    <!-- default is 07 -->
    <version_support>07</version_support>

    <!-- <address> default is QHostAddress::Any -->
    <address>0.0.0.0</address>
    <!-- <port> default is 8096 -->
    <port>8096</port>

    <!-- if enable="no" all the <ssl_configuration> child elements will be ignored -->
    <!-- default is enable="no" -->
    <ssl_configuration enable="yes">
      <!-- SSL Protocol to support = {AnyProtocol | SslV2 | NoSslV2 | SslV3 | TlsV1} -->
      <ssl_protocol>NoSslV2</ssl_protocol>
      <!-- format attribute values = {pem | der} -->
      <certificate_file format="pem">server.pem</certificate_file>
      <ca_certificates_file format="pem">cacerts.pem</ca_certificates_file>

      <!-- use attribute password="password" to set private_key password -->
      <private_key_file>server.key</private_key_file>
    </ssl_configuration>

    <!-- enable="yes" creates a client configurations based on the http
         basic auth value if present, or else the client's src IP address. -->
    <!-- default is enable="yes" -->
    <create_client_configurations enable="no"/>

    <!-- allow="yes" allows clients to connect without providing HTTP Basic Auth
         _or_ HTTPS Client certificate -->
    <!-- default is allow="no" -->
    <allow_unauthenticated_clients allow="no"/>

    <!-- allow="yes" allows curl to easily be used to slurp in MAP data -->
    <!-- default is allow="no" -->
    <allow_invalid_session_id allow="no"/>

    <!-- allow="yes" allows clients to use the SSRC channel for ARC requests
         in a non-standard mode. -->
    <!-- default is allow="no" -->
    <allow_arc_on_ssrc allow="no"/>
  </service_configuration>

  <!-- Define specific authorized clients 
       The default authorization for all clients can be specified with the 
       default-authorization attribute.  The default value for the default-authorization
       attribute is 00 (DenyAll).
  -->
  <!--
    DenyAll = 0x00,
    AllowPublish = 0x01,
    AllowSearch = 0x02,
    AllowSubscribe = 0x04,
    AllowPoll = 0x08,
    AllowPurgeSelf = 0x10,
    AllowPurgeOthers = 0x20,
    AllowAll = 0x80
  -->
  <client_configuration default-authorization="80">
    <!-- client can do anything except purge others -->
    <client name="client1" authorization="1F" authentication="basic">
      <username>mapclient</username>
      <password>mapclient</password>
    </client>
    <!-- client can do anything except purge others -->
    <client name="client1" authorization="1F" authentication="basic">
      <username>helper</username>
      <password>mapclient</password>
    </client>
    <!-- read-only client with basic auth -->
    <client name="client2" authorization="0E" authentication="basic">
      <username>reader</username>
      <password>reader</password>
    </client>
    <!-- read-only client with cert auth -->
    <client name="client3" authorization="0E" authentication="certificate">
      <certificate_file format="pem">filename</certificate_file>
      <ca_certificates_file format="pem">cacerts.pem</ca_certificates_file>
    </client>
    <!-- In the following example, clients are automatically created if they 
	 provide certificates issued by this CA, and are given the specified
	 authorization.  In this case, the name attribute is ignored.  Note 
	 that the <certificate_file/> element is intentionally missing.
    -->
    <client name="ca-client-" authorization="1F" authentication="ca-certificate">
      <ca_certificates_file format="pem">client-cacert.pem</ca_certificates_file>
    </client>
  </client_configuration>
  
</omapd_configuration>
